--[[
aincrad商店
消耗城建币
]]

local ShopScene = import(".ShopScene")
local ShopAincradScene = class("ShopAincradScene", ShopScene)


function ShopAincradScene:initView()
	ShopAincradScene.super.initView(self)	

	-- 按钮层
	app:createView("widget.MenuLayer", {wealth="castle"}):addTo(self):zorder(10)
	:onBack(function(layer)
		app:popScene()
	end)

-------------------------------------------------------
-- 侧边按钮
	-- 普通商店
	CommonButton.sidebar("普通")
	:addTo(self.layer_)
	:pos(885, 420)
	-- :zorder(5)
	:onTouch(function(event)		
		if event.name == "clicked" then
			CommonSound.click() -- 音效
			
		    SceneData:enterScene("ShopNormal", self)
		end 
	end)

	-- 积分商店
	CommonButton.sidebar("积分")
	:addTo(self.layer_)
	:pos(885, 345)
	-- :zorder(5)
	:onTouch(function(event)		
		if event.name == "clicked" then 
			CommonSound.click() -- 音效
			print("enter score")
		    SceneData:enterScene("ShopScore", self)
		end 
	end)

	CommonButton.sidebar("葛朗特")
	:addTo(self.layer_)
	:pos(885, 270)
	:zorder(5)
	:setSelected(true)

	-- 世界树商店
	self.treeBtn = CommonButton.sidebar("世界树")
	:addTo(self.layer_)
	:pos(885, 195)
	-- :zorder(5)
	:onTouch(function(event)		
		if event.name == "clicked" then 
			CommonSound.click() -- 音效
		    SceneData:enterScene("ShopTree", self)
		end 
	end)

end

function ShopAincradScene:updateData()
	ShopAincradScene.super.updateData(self)

	self.data = ShopList:getShop("aincrad")		
end 

function ShopAincradScene:updateView()
	ShopAincradScene.super.updateView(self)

	self.treeBtn:setVisible(TreeData:isTreeOpen())
end 
 
-- 商店 到时间 刷新了 的检测
function ShopAincradScene:autoRefreshListenerName()
	return "refresh_shop_aincrad"
end 

return ShopAincradScene 
