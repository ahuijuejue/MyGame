local UnionSetLayer = class("UnionSetLayer",function ()
	return display.newColorLayer(cc.c4b(0, 0, 0, 200))
end)

local BgImg = "Union_Mail_Bg.png"
local applyTitle = "union_set.png"
local applyStage = {"30", "35", "40", "45", "50", "55", "60", "65", "70", "75", "80", "85"}
local image_ = {
	    normal = "union_image.png",
	    pressed = "union_image.png",
	    disabled = "union_image.png",
	}

function UnionSetLayer:ctor()
	self:initData()
	self:initView()
end

function UnionSetLayer:initData()
	self.applyNum = 30
    self.isPassApply = false
    self.addImg = {true , true}
end

function UnionSetLayer:initView()
	self.spriteBg = display.newSprite(BgImg):pos(display.cx-5,display.cy-20):addTo(self)
	display.newSprite(applyTitle):pos(380, 425):addTo(self.spriteBg)

    local posX = -50
	local label1 = display.newTTFLabel({text = "设置入会申请等级：",color = cc.c3b(254, 231, 93), size = 24})
    label1:pos(posX+label1:getContentSize().width,345):addTo(self.spriteBg)

    -- 入会申请等级
    self.img1 = display.newSprite():pos(347,345):addTo(self.spriteBg, 2)

    CommonButton.yellow3("",{image = image_})
    :onButtonClicked(function ()
    	self.addImg[1] = not self.addImg[1]
    	if self.addImg[1] then
    		self.img1:setTexture("union_2.png")
    	else
    		self.img1:setTexture("union_1.png")
    	end
		print("查看入会申请等级")
	end)
	:pos(328, 345)
	:addTo(self.spriteBg)

    self.applyStage = display.newTTFLabel({text = "",color = CommonView.color_black(), size = 24})
    self.applyStage:pos(310, 345):addTo(self.spriteBg, 2)

    local label2 = display.newTTFLabel({text = "设置跳过入会申请：",color = cc.c3b(254, 231, 93), size = 24})
    label2:pos(posX+label2:getContentSize().width,250):addTo(self.spriteBg)

    -- 是否跳过入会申请
    self.img2 = display.newSprite():pos(347,250):addTo(self.spriteBg, 5)

    CommonButton.yellow3("",{image = image_})
    :onButtonClicked(function ()
    	self.addImg[2] = not self.addImg[2]
    	if self.addImg[2] then
    		self.img2:setTexture("union_2.png")
    	else
    		self.img2:setTexture("union_1.png")
    	end
		print("是否跳过入会申请")
	end)
	:pos(328, 250)
	:addTo(self.spriteBg)

    self.isPassLabel= display.newTTFLabel({text = "",color = CommonView.color_black(), size = 24})
    self.isPassLabel:pos(310, 250):addTo(self.spriteBg,2)

    local label3 = display.newTTFLabel({text = "（设置后所有玩家申请入会后自动入会）",color = CommonView.color_red() , size = 20})
    label3:pos(posX+label3:getContentSize().width-85,210):addTo(self.spriteBg)

    CommonButton.yellow("取消", {color = cc.c3b(252, 242, 181)})
    :onButtonClicked(function ()
    	self.delegate:removeUnionSetLayer()
		print("取消")
	end)
	:addTo(self.spriteBg)
	:pos(185, 65)

	CommonButton.yellow("确定", {color = cc.c3b(252, 242, 181)})
    :onButtonClicked(function ()
		print("确定")
	end)
	:pos(585,65)
	:addTo(self.spriteBg)
end

function UnionSetLayer:updateData()
	-- body
end

function UnionSetLayer:updateView()
	self.applyStage:setString(tostring(self.applyNum))
	if self.isPassApply then
		self.isPassLabel:setString("是")
	else
		self.isPassLabel:setString("否")
	end

	if self.addImg[1] then
		self.img1:setTexture("union_2.png")
	else
		self.img1:setTexture("union_1.png")
	end

	if self.addImg[2] then
		self.img2:setTexture("union_2.png")
	else
		self.img2:setTexture("union_1.png")
	end

end

return UnionSetLayer
