--[[
积分商店
]]
local ShopScene = import(".ShopScene")
local ShopScoreScene = class("ShopScoreScene", ShopScene)

function ShopScoreScene:initView()
	ShopScoreScene.super.initView(self)

	-- 按钮层
	app:createView("widget.MenuLayer", {wealth="card"}):addTo(self):zorder(10)
	:onBack(function(layer)
		self:pop()
	end)
-------------------------------------------------------
-- 侧边按钮
	-- 普通商店
	CommonButton.sidebar("普通")
	:addTo(self.layer_)
	:pos(885, 420)
	:onTouch(function(event)
		if event.name == "clicked" then
			CommonSound.click() -- 音效

		    SceneData:enterScene("ShopNormal", self)
		end
	end)

	-- 积分商店
	CommonButton.sidebar("积分")
	:addTo(self.layer_)
	:pos(885, 345)
	:zorder(5)
	:setSelected(true)

	-- 艾恩葛朗特商店
	self.aincradBtn = CommonButton.sidebar("葛朗特")
	:addTo(self.layer_)
	:pos(885, 270)
	:onClicked(function(event)
		CommonSound.click() -- 音效
	    SceneData:enterScene("ShopAincrad", self)
	end)

	-- 世界树商店
	self.treeBtn = CommonButton.sidebar("世界树")
	:addTo(self.layer_)
	:pos(885, 195)
	:onTouch(function(event)
		if event.name == "clicked" then
			CommonSound.click() -- 音效
		    SceneData:enterScene("ShopTree", self)
		end
	end)

	-- 公会商店
	self.unionBtn = CommonButton.sidebar("公会")
	:addTo(self.layer_)
	:pos(885, 120)
	:onClicked(function(event)
		CommonSound.click() -- 音效
	    SceneData:enterScene("ShopUnion", self)
	end)
--------------------------------------------------------

end

function ShopScoreScene:updateData()
	ShopScoreScene.super.updateData(self)

	self.data = ShopList:getShop("score")
end

function ShopScoreScene:updateView()
	ShopScoreScene.super.updateView(self)

	self.aincradBtn:setVisible(AincradData:isAincradOpen())
	self.treeBtn:setVisible(TreeData:isTreeOpen())
	self.unionBtn:setVisible(UnionListData.unionDuty ~= "0")
end

-- 商店 到时间 刷新了 的检测
function ShopScoreScene:autoRefreshListenerName()
	return "refresh_shop_score"
end

return ShopScoreScene
