local UnionManageLayer = class("UnionManageLayer",function ()
	return display.newColorLayer(cc.c4b(0, 0, 0, 200))
end)

local image_ = {
	    normal = "Union_Master_Btn.png",
	    pressed = "Union_Master_Btn.png",
	    disabled = "Union_Master_Btn.png",
	}

function UnionManageLayer:ctor()
	self:setTouchEnabled(true)
	self:setTouchSwallowEnabled(true)
	self:addNodeEventListener(cc.NODE_TOUCH_EVENT, function(event)
		if event.name == "began" then
			return true
		elseif event.name == "ended" then
			self.delegate:removeUnionManageLayer()
		end
    end)

	local spriteBg = display.newSprite("Union_Master_Bg.png"):pos(display.cx-5,display.cy-20):addTo(self)

    local posX = 135
    CommonButton.yellow3("入会申请",{image = image_})
    :onButtonClicked(function ()
    	NetHandler.gameRequest("ShowApplierList")
		print("入会申请")
	end)
	:pos(posX,390)
	:addTo(spriteBg)

	CommonButton.yellow3("申请设置",{image = image_})
    :onButtonClicked(function ()
    	self.delegate:createUnionSetLayer()
		print("申请设置")
	end)
	:pos(posX,310)
	:addTo(spriteBg)

	CommonButton.yellow3("全员邮件",{image = image_})
    :onButtonClicked(function ()
    	self.delegate:createUnionMailLayer()
		print("全员邮件")
	end)
	:pos(posX,230)
	:addTo(spriteBg)

    local string_ = "确定退出公会？"
    if UnionListData:getUnionDuty() == "1" and #UnionListData.unionMemberData == 1 then
    	string_ = "确定退出公会？(公会解散)"
    end
	CommonButton.yellow3("退出公会",{image = image_})
    :onButtonClicked(function ()
	    	AlertShow.show2("提示", string_, "确定", function(event)
				NetHandler.gameRequest("SecedeUnion")
				print("确认退出。。")
			end, function()
		end)
	end)
	:pos(posX,150)
	:addTo(spriteBg)

	CommonButton.yellow3("其他",{image = image_})
    :onButtonClicked(function ()
    	showToast({text = "暂未开放！"})
		print("其他")
	end)
	:pos(posX,70)
	:addTo(spriteBg)

end

return UnionManageLayer
