local FeedbackModel = class("FeedbackModel")

function FeedbackModel:ctor()
	self.items = {}
	self.process = 1
	self.isFinish = 0
	self.closeTime = 0
	self.rechargeValue = 0
	self.rechargeLimit = {6,6,6,6,6}
end

function FeedbackModel:update(data)
	self.process = data.param2
	self.rechargeValue = data.param3
	self.isFinish = data.param4
	self.closeTime = data.param5
	self.items = data.a_param1
	local arr = string.split(data.param6,",")
	for i,v in ipairs(arr) do
		self.rechargeLimit[i] = tonumber(v)
	end
end

function FeedbackModel:setRechargeValue(value)
	self.rechargeValue = value
end

function FeedbackModel:getRechargeLimit()
	return self.rechargeLimit[self.process]
end

function FeedbackModel:isCanActivate()
	if self.rechargeValue < self:getRechargeLimit() then
		return true
	else
		if self.isFinish == 0 then
			return true
		end
	end
	return false
end

function FeedbackModel:isOpen()
	if UserData.curServerTime < self.closeTime then
		return true
	end
	return false
end

return FeedbackModel