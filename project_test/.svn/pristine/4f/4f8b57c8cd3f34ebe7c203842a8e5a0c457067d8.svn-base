--[[
普通商店
]]
local ShopScene = import(".ShopScene")
local ShopNormalScene = class("ShopNormalScene", ShopScene)

function ShopNormalScene:initView()	
	ShopNormalScene.super.initView(self)	

	-- 按钮层
	app:createView("widget.MenuLayer", {wealth="card"}):addTo(self):zorder(10)
	:onBack(function(layer)
		self:pop()
	end)
-------------------------------------------------------
-- 侧边按钮
	-- 普通商店
	CommonButton.sidebar("普通")
	:addTo(self.layer_)
	:pos(885, 420)
	:zorder(5)
	:setSelected(true)

	-- 积分商店
	CommonButton.sidebar("积分")
	:addTo(self.layer_)
	:pos(885, 345)
	-- :zorder(5)
	:onTouch(function(event)		
		if event.name == "clicked" then 
			CommonSound.click() -- 音效
			print("enter score")
		    SceneData:enterScene("ShopScore", self)
		end 
	end)

	-- 艾恩葛朗特商店
	self.aincradBtn = CommonButton.sidebar("葛朗特")
	:addTo(self.layer_)
	:pos(885, 270)
	:onClicked(function(event)
		CommonSound.click() -- 音效
	    SceneData:enterScene("ShopAincrad", self)
	end)

	-- 世界树商店
	self.treeBtn = CommonButton.sidebar("世界树")
	:addTo(self.layer_)
	:pos(885, 195)
	:onClicked(function(event)
		CommonSound.click() -- 音效
	    SceneData:enterScene("ShopTree", self)
	end)

end


function ShopNormalScene:updateData()
	ShopNormalScene.super.updateData(self)

	self.data = ShopList:getShop("normal")		
end 

function ShopNormalScene:updateView()
	ShopNormalScene.super.updateView(self)

	self.aincradBtn:setVisible(AincradData:isAincradOpen())
	self.treeBtn:setVisible(TreeData:isTreeOpen())
end 
 
-- 商店 到时间 刷新了 的检测
function ShopNormalScene:autoRefreshListenerName()
	return "refresh_shop_normal"
end 

return ShopNormalScene 
