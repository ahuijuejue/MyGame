
local DiscountData = class("DiscountData")


function DiscountData:ctor()
	-- body
	print("DiscountData:ctor()+++++")

		-- 七日打折 
	self.dictSeven = {} 
	self.arrSeven  = {}
end

-- 七天打折活动系列
function DiscountData:getOpenArray()
	print("···")
	local sec = UserData:getServerSecond()
	print("当前服务器时间_DiscountData++++"..sec)
	local arr = {}
	for i,v in ipairs(self.arr) do
		if v:isOpen(sec) then 
			table.insert(arr, v)
		end 
	end
	dump(arr)
	return arr
end 


-----------------------------------------------
--@param sec 时间 秒 

-- 签到用的日期 
function DiscountData:getDate(sec)
	sec = sec - 18000 
	sec = math.max(sec, 0)
	return os.date("*t", sec)		
end

function DiscountData:getServerDate()
	local sec = UserData:getServerSecond() 	-- 当前时间
	print(sec.."+++++++++++++")
	dump(self:getDate(sec))
	return self:getDate(sec) 	-- 转换成签到用日期	
end





-- 今天是否进行了七日签到  
function DiscountData:isSevenSigned()
	-- local date = self:getServerDate()
	-- local signDate = self:getDate(self.sevenDate) 	

	-- if date.yday ~= signDate.yday then 
	-- 	return false 
	-- end 

	-- if date.year ~= signDate.year then 
	-- 	return false 
	-- end 
	
	-- return true 
end

return DiscountData