local OpenDiscountShopResponse = class("OpenDiscountShopResponse")

function OpenDiscountShopResponse:OpenDiscountShopResponse(data)
	if data.result == 1 then
		self.param1 = data.param1
		if DiscountShopData then
			self:updateBuyData(data)
		else
			DiscountShopData = require("app.data.DiscountShopData").new()
			self:updateBuyData(data)
		end
		GameDispatcher:dispatchEvent({name = EVENT_CONSTANT.NET_CALLBACK,data = data})
	end
end

function OpenDiscountShopResponse:updateBuyData(data)
	if data.param1 then
		local buyIds = string.split(self.param1,",")
		for i,v in ipairs(buyIds) do
			DiscountShopData:updateBuyStatus(tonumber(v),true)
		end
	end
end

function OpenDiscountShopResponse:ctor()
	--响应消息号
	self.order = 20035
	--返回结果,1 成功,-1:不能领取奖励
	self.result =  ""
	--商品ID，用,分隔开，注意：没有购买的时候返回nil
	self.param1 =  ""	
end

return OpenDiscountShopResponse